function JSQL_constructor(t,e,n){this.GOOGLE_SHEET_URL=t,this.GOOGLE_SCRIPT_URL=e,this.TABLES=n,this.INSERT_VAR=0,this.request_parametrs={function:"function_name",table:"table_name"},this.get_sheet_url=function(t,e){return"https://script.google.com/macros/s/"+this.GOOGLE_SHEET_URL+"/exec?callback="+t+"&table_name="+e},this.get_script_url=function(){return"https://script.google.com/macros/s/"+this.GOOGLE_SCRIPT_URL+"/exec"}}function check_condition(t,e){let n=!1,o="",r="",i="";for(let s=0;s<e.length;s++){n=!1,o=e[s][0],r=e[s][1],e[s][2]="string"==typeof e[s][2]?[e[s][2]]:e[s][2];for(let a=0;a<e[s][2].length;a++)i=e[s][2][a],"="==r?t[o]==i&&(n=!0):"<>"==r||"!="==r?t[o]!=i&&(n=!0):">"==r?t[o]>=i&&(n=!0):">"==r?t[o]<=i&&(n=!0):"LIKE"==r?t[o].toLowerCase().includes(i.toLowerCase())&&(n=!0):"from"==r?new Date(t[o])>i&&(n=!0):"to"==r&&new Date(t[o])<i&&(n=!0);if(0==n)return n}return!0}function select_rows(t,e){let n=[];for(let o=0;o<e.length;o++)n.push(t[e[o]]);return n}function condition_cols_to_lower(t){for(let e=0;e<t.length;e++)t[e][0]=t[e][0].toLowerCase();return t}function row_cols_to_lower(t){for(let e=0;e<t.length;e++)t[e]=t[e].toLowerCase();return t}function SELECT(t,e=[],n=[]){let o=[];e=row_cols_to_lower(e),n=condition_cols_to_lower(n);for(let r=0;r<t.length;r++)check_condition(t[r],n)&&o.push(select_rows(t[r],e));return o}function INSERT(t,e=[]){setTimeout(send_data,1e3*JSQL.INSERT_VAR,t,"INSERT",e),JSQL.INSERT_VAR++}function UPDATE(t,e,n=[],o=[]){let r=SELECT(t,["id"],o);n.push(["id",JSON.stringify(r.flat())]),send_data(e,"UPDATE",n)}function DELETE(t,e,n=[]){let o=SELECT(t,["id"],n);send_data(e,"DELETE",[["id",JSON.stringify(o.flat())]])}function COUNT(t,e=[]){let n=0;e=condition_cols_to_lower(e);for(let o=0;o<t.length;o++)check_condition(t[o],e)&&n++;return n}function queryJSQL(t,e,n){let o=document.createElement("script");o.classList.add("DELETE_ME"),o.src=JSQL.get_sheet_url(e.name,n),document.body.append(o),setTimeout(garbage_collection,3e3)}function send_data(t,e,n){let o=document.createElement("form"),r=Math.random();o.id="send_data_to_google",o.action=JSQL.get_script_url(),o.method="POST",o.target="request_to_sheet_"+r,o.innerHTML=tag_input(e,JSQL.request_parametrs.function)+tag_input(t,JSQL.request_parametrs.table)+input_section(n)+"<input id='submit_and_send' type='submit'>",document.getElementsByTagName("body")[0].append(o),document.getElementsByTagName("body")[0].insertAdjacentHTML("beforeEnd",`\n\t\t\t\t\t<div id='${r}' class="DELETE_ME" style="display: none !important" name='${e}_ELEMENT' >\n\t\t\t\t\t\t\t<iframe name="request_to_sheet_${r}" src="#">\n\t\t\t\t\t\t\t\t\tYour browser does not support inline frames.\n\t\t\t\t\t\t\t</iframe>\n\t\t\t\t\t</div>\n\t\t`),o.submit(),setTimeout(garbage_collection,5e3),document.getElementById("send_data_to_google").remove()}function garbage_collection(){Array.prototype.slice.call(document.getElementsByClassName("DELETE_ME")).map(function(t){t.remove()})}function tag_input(t,e){return"<input type='text' name='"+e+"' value='"+t+"' >"}function input_section(t){let e="";for(let n=0;n<t.length;n++)e+=tag_input(t[n][1],t[n][0].toLowerCase());return e+=tag_input("authSuccess","jsonpCallback")}